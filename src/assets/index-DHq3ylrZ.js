import{d as E,u as N,n as R,o as U,r as m,a as u,c as w,e as y,f as g,F as h,p as D,q as L,b as o,t as x,s as $,h as c,j as B}from"./index-BoIYWpSM.js";import{a as k,_ as j}from"./_plugin-vue_export-helper-BMctTixa.js";class C{static coursesAll(v){return k.get({url:"courses/tvShows/all"})}static coursesMainld(v){return k.get({url:"/courses/tvShows/queryEpisodesByMainId?id="+v})}static queryCourseTag(){return k.get({url:"/courses/tvShows/queryCourseTag"})}}const I={style:{"font-size":"28px","word-wrap":"break-word",color:"#fff","font-weight":"600",margin:"0","word-break":"break-all"}},P={class:"card"},G={class:"card-title"},H={class:"card-des"},J=["onClick"],K=E({__name:"index",setup(M){const v=N();R();const T=c([]),a=c([]),q=c([]),f=c(!1),S=c(""),b=c(""),A=c({playbackRates:[.7,1,1.5,2],autoplay:"any",muted:!0,loop:!0,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,notSupportedMessage:"此视频暂无法播放，请稍后再试",controls:!0,controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!1}}),z=async r=>{a.value=[],q.value=[];const e=await C.coursesAll(r),s=await C.queryCourseTag();if(e.success==!0){const l=s.result,i=e.result;for(let t=0;t<l.length;t++){let d={tlite:l[t],tag:"",coursesDataList:[]};T.value.push("id-"+t),a.value.push(d);for(let n=0;n<i.length;n++){let p={tag:"",coursesDataList:[]};a.value[t].tlite==i[n].nav&&(p.tag=i[n].tag,p.coursesDataList.push(i[n]),a.value[t].coursesDataList.push(p))}}for(let t=0;t<a.value.length;t++)a.value[t].coursesDataList=F(a.value[t].coursesDataList);console.log(a.value)}else B.warning("网络异常,请检查网络或联系管理员")},F=r=>{const e=new Map;return r.forEach(s=>{var l;e.has(s.tag)?(l=e.get(s.tag))==null||l.coursesDataList.push(...s.coursesDataList):e.set(s.tag,s)}),Array.from(e.values())},O=async r=>{const e=await C.coursesMainld(r.id);e.success==!0?(S.value=e.result[0].vurl,b.value=e.result[0].title,f.value=!0):B.warning("网络异常,请检查网络或联系管理员")};return U(()=>{const r=v.getUserOption;z(r)}),(r,e)=>{const s=m("a-col"),l=m("a-row"),i=m("video-player"),t=m("a-modal");return u(),w(h,null,[y(l,null,{default:g(()=>[(u(!0),w(h,null,D(a.value,(d,n)=>(u(),L(s,{class:"right_row",span:24,key:n},{default:g(()=>[(u(!0),w(h,null,D(d.coursesDataList,(p,Q)=>(u(),L(l,{gutter:[16,16],style:{"margin-bottom":"20px"}},{default:g(()=>[y(s,{span:24},{default:g(()=>[o("span",I,x(p.tag),1)]),_:2},1024),(u(!0),w(h,null,D(p.coursesDataList,(_,V)=>(u(),L(s,{class:"gutter-row",xs:20,sm:12,md:12,lg:8,xl:6,xxl:4,key:V},{default:g(()=>[o("div",P,[o("div",{class:"card-image-container",style:$({"background-image":"url("+_.pic+")"})},null,4),o("p",G,x(_.title),1),o("p",H,x(_.description),1),o("div",{class:"card-btn",onClick:W=>O(_)},[...e[2]||(e[2]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 384 512","stroke-width":"0",fill:"currentColor",stroke:"currentColor"},[o("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})],-1),o("span",{class:"card-btn-text"},"播放",-1)])],8,J)])]),_:2},1024))),128))]),_:2},1024))),256))]),_:2},1024))),128))]),_:1}),y(t,{open:f.value,"onUpdate:open":e[0]||(e[0]=d=>f.value=d),title:b.value,width:"80%",destroyOnClose:!0,footer:null,centered:"",onOk:e[1]||(e[1]=d=>f.value=!1)},{default:g(()=>[y(i,{src:S.value,options:A.value,volume:.6},null,8,["src","options"])]),_:1},8,["open","title"])],64)}}}),Z=j(K,[["__scopeId","data-v-5033556c"]]);export{Z as default};
